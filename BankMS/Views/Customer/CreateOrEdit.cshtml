@model BankMS.Models.Customer

@{
    ViewData["Title"] = Model.Id == 0 ? "Create Customer" : "Edit Customer";
}

<!-- Ensure these are in your _Layout.cshtml -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<div class="container-fluid py-5 bg-light min-vh-100">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-8 col-xl-7">
            <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
                <!-- Header -->
                <div class="card-header bg-primary text-white text-center py-4">
                    <h3 class="mb-0 fw-bold">
                        <i class="fas fa-user-plus me-3"></i>
                        @ViewData["Title"]
                    </h3>
                </div>

                <!-- Body -->
                <div class="card-body p-4 p-md-5">
                    <form asp-action="CreateOrEdit" method="post" class="needs-validation" novalidate>
                        <input type="hidden" asp-for="Id" />

                        <div class="row g-4">
                            <!-- NID Number -->
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input asp-for="NIDNumber" class="form-control" placeholder="NID Number" required />
                                    <label asp-for="NIDNumber">
                                        <i class="fas fa-id-card me-2 text-primary"></i>NID Number
                                    </label>
                                    <span asp-validation-for="NIDNumber" class="text-danger small mt-1"></span>
                                </div>
                            </div>

                            <!-- Address -->
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input asp-for="Address" class="form-control" placeholder="Address" required />
                                    <label asp-for="Address">
                                        <i class="fas fa-home me-2 text-primary"></i>Address
                                    </label>
                                    <span asp-validation-for="Address" class="text-danger small mt-1"></span>
                                </div>
                            </div>

                            <!-- Date of Birth -->
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input asp-for="DateOfBirth" type="date" class="form-control" placeholder="Date of Birth" required />
                                    <label asp-for="DateOfBirth">
                                        <i class="fas fa-calendar-alt me-2 text-primary"></i>Date of Birth
                                    </label>
                                    <span asp-validation-for="DateOfBirth" class="text-danger small mt-1"></span>
                                </div>
                            </div>

                            <!-- Gender -->
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <select asp-for="Gender" class="form-select"
                                            asp-items='new SelectList(new string[] { "", "Male", "Female", "Other" }, "")'
                                            required>
                                    </select>
                                    <label asp-for="Gender">
                                        <i class="fas fa-venus-mars me-2 text-primary"></i>Gender
                                    </label>
                                    <span asp-validation-for="Gender" class="text-danger small mt-1"></span>
                                </div>
                            </div>

                            <!-- KYC Status -->
                            <div class="col-12">
                                <div class="form-floating">
                                    <select asp-for="KYCStatus" class="form-select"
                                            asp-items='new SelectList(new string[] { "", "Pending", "Approved", "Rejected" }, "")'
                                            required>
                                    </select>
                                    <label asp-for="KYCStatus">
                                        <i class="fas fa-check-circle me-2 text-primary"></i>KYC Status
                                    </label>
                                    <span asp-validation-for="KYCStatus" class="text-danger small mt-1"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Buttons -->
                        <div class="d-grid d-md-flex justify-content-md-end gap-3 mt-5">
                            <a asp-action="Index" class="btn btn-outline-secondary btn-lg px-5">
                                <i class="fas fa-arrow-left me-2"></i>Cancel
                            </a>
                            <button type="submit" class="btn btn-primary btn-lg px-5">
                                <i class="fas fa-save me-2"></i>
                                @(Model.Id == 0 ? "Create Customer" : "Update Customer")
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <!-- Client-side validation (Bootstrap 5 style) -->
    <script>
        // Bootstrap 5 form validation enhancement
        (() => {
            'use strict'
            const forms = document.querySelectorAll('.needs-validation')
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                }, false)
            })
        })()
    </script>

    <!-- ASP.NET Core validation scripts -->
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}